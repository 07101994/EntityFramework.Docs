<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>.NET Core Application to New SQLite Database </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content=".NET Core Application to New SQLite Database ">
    <meta name="generator" content="docfx 2.5.4.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="platforms/netcore/new-db-sqlite">
              <h1 id="net-core-application-to-new-sqlite-database" sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="4" sourceendlinenumber="4">.NET Core Application to New SQLite Database</h1>
              
<div class="WARNING sourceFile=" platforms/netcore/new-db-sqlite.md"="" sourcestartlinenumber="6" sourceendlinenumber="6" "=""><h5>Warning</h5><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="7" sourceendlinenumber="7">This documentation is for EF Core. For EF6.x and earlier release see <a href="http://msdn.com/data/ef" sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="7" sourceendlinenumber="7"><a href="http://msdn.com/data/ef" sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="7" sourceendlinenumber="7">http://msdn.com/data/ef</a></a>.</p>
</div>
<p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="9" sourceendlinenumber="9">In this walkthrough, you will build a .NET Core console application that performs basic data access using Entity Framework. You will use migrations to create the database from your model.</p>
<div class="TIP sourceFile=" platforms/netcore/new-db-sqlite.md"="" sourcestartlinenumber="11" sourceendlinenumber="11" "=""><h5>Tip</h5><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="12" sourceendlinenumber="12">You can view this article&#39;s <a href="https://github.com/aspnet/EntityFramework.Docs/tree/master/samples/Platforms/NetCore/ConsoleApp.SQLite" sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="12" sourceendlinenumber="12">sample</a> on GitHub.</p>
</div>
<h2 id="prerequisites" sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="14" sourceendlinenumber="14">Prerequisites</h2>
<p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="16" sourceendlinenumber="16">Minimum system requirements</p>
<ul sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="17" sourceendlinenumber="21">
<li sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="17" sourceendlinenumber="17"><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="17" sourceendlinenumber="17">An operating system that supports .NET Core</p>
</li>
<li sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="19" sourceendlinenumber="19"><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="19" sourceendlinenumber="19"><a href="https://www.microsoft.com/net/core" sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="19" sourceendlinenumber="19">.NET Core SDK Preview 2</a></p>
</li>
<li sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="21" sourceendlinenumber="21"><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="21" sourceendlinenumber="21">A text editor</p>
</li>
</ul>
<div class="WARNING sourceFile=" platforms/netcore/new-db-sqlite.md"="" sourcestartlinenumber="23" sourceendlinenumber="23" "=""><h5>Warning</h5><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="24" sourceendlinenumber="24"><strong>Known Issues</strong></p>
<ul sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="26" sourceendlinenumber="26">
<li sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="26" sourceendlinenumber="26">Migrations on SQLite do not support more complex schema changes due to limitations in SQLite itself. See <a href="../../providers/sqlite/limitations.html" sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="26" sourceendlinenumber="26">SQLite Limitations</a></li>
</ul>
</div>
<h3 id="install-the-net-core-sdk" sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="28" sourceendlinenumber="28">Install the .NET Core SDK</h3>
<p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="30" sourceendlinenumber="30">The .NET Core SDK provides the command-line tool <code>dotnet</code> which will be used to build and run our sample application.</p>
<p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="32" sourceendlinenumber="32">See the <a href="https://www.microsoft.com/net/core" sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="32" sourceendlinenumber="32">.NET Core website</a> for instructions on installing the SDK on your operating system.</p>
<h2 id="create-a-new-project" sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="34" sourceendlinenumber="34">Create a new project</h2>
<ul sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="36" sourceendlinenumber="38">
<li sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="36" sourceendlinenumber="38"><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="36" sourceendlinenumber="36">Create a new folder <code>ConsoleApp/</code> for your project. All files for the project should be in this folder.</p>
<!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->
</li>
</ul>
<pre sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="41" sourceendlinenumber="44"><code class="lang-bash">mkdir ConsoleApp
cd ConsoleApp/
</code></pre><ul sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="46" sourceendlinenumber="48">
<li sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="46" sourceendlinenumber="48"><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="46" sourceendlinenumber="46">Execute the following .NET Core CLI commands to create a new console application, download dependencies, and run the .NET Core app.</p>
   <!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->


</li>
</ul>
<pre sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="51" sourceendlinenumber="55"><code class="lang-bash">dotnet new
dotnet restore
dotnet run
</code></pre><h2 id="install-entity-framework" sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="57" sourceendlinenumber="57">Install Entity Framework</h2>
<ul sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="59" sourceendlinenumber="61">
<li sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="59" sourceendlinenumber="61"><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="59" sourceendlinenumber="59">To add EF to your project, modify <code>project.json</code> so it matches the following sample.</p>
 <!-- [!code-json[Main](samples/Platforms/NetCore/ConsoleApp.SQLite/project.json?highlight=8,9,10,11,12,25,26,27)] -->


</li>
</ul>
<pre sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="64" sourceendlinenumber="93"><code>````json
{
  &quot;version&quot;: &quot;1.0.0-*&quot;,
  &quot;buildOptions&quot;: {
    &quot;debugType&quot;: &quot;portable&quot;,
    &quot;emitEntryPoint&quot;: true
  },
  &quot;dependencies&quot;: {
    &quot;Microsoft.EntityFrameworkCore.Sqlite&quot;: &quot;1.0.0&quot;,
    &quot;Microsoft.EntityFrameworkCore.Design&quot;: {
      &quot;version&quot;: &quot;1.0.0-preview2-final&quot;,
      &quot;type&quot;: &quot;build&quot; 
    }
  },
  &quot;frameworks&quot;: {
    &quot;netcoreapp1.0&quot;: {
      &quot;dependencies&quot;: {
        &quot;Microsoft.NETCore.App&quot;: {
          &quot;type&quot;: &quot;platform&quot;,
          &quot;version&quot;: &quot;1.0.0&quot;
        }
      },
      &quot;imports&quot;: &quot;dnxcore50&quot;
    }
  },
  &quot;tools&quot;: {
    &quot;Microsoft.EntityFrameworkCore.Tools&quot;: &quot;1.0.0-preview2-final&quot; 
  } 
}
````
</code></pre><ul sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="95" sourceendlinenumber="97">
<li sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="95" sourceendlinenumber="97"><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="95" sourceendlinenumber="95">Run <code>dotnet restore</code> again to install the new packages.</p>
  <!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->


</li>
</ul>
<pre sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="100" sourceendlinenumber="131"><code>````bash
dotnet restore
````

* Verify that Entity Framework is installed by running `dotnet ef --help`.

 &lt;!-- literal_block&quot;language&quot;: &quot;csharp&quot;,&quot;, &quot;xml:space&quot;: &quot;preserve&quot;, &quot;classes  &quot;backrefs  &quot;names  &quot;dupnames  highlight_args}, &quot;ids  &quot;linenos&quot;: false --&gt;


````bash
dotnet ef --help
````

## Create your model

With this new project, you are ready to begin using Entity Framework. The next steps will add code to configure and access a SQLite database file.

* Create a new file called `Model.cs`

 All classes in the following steps will be added to this file.

&lt;!-- [!code-csharp[Main](samples/Platforms/NetCore/ConsoleApp.SQLite/Model.cs)] --&gt;


````csharp
using System.Collections.Generic;
using System.IO;
using Microsoft.EntityFrameworkCore;

namespace ConsoleApp.SQLite
{
````
</code></pre><ul sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="133" sourceendlinenumber="137">
<li sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="133" sourceendlinenumber="137"><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="133" sourceendlinenumber="133">Add a new class to represent the SQLite database.</p>
<p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="133" sourceendlinenumber="133"> We will call this <code>BloggingContext</code>. The call to <code>UseSqlite()</code> configures EF to point to a *.db file.</p>
 <!-- [!code-csharp[Main](samples/Platforms/NetCore/ConsoleApp.SQLite/Model.cs?highlight=1,8)] -->


</li>
</ul>
<pre sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="140" sourceendlinenumber="151"><code>````csharp
public class BloggingContext : DbContext
{
    public DbSet&lt;Blog&gt; Blogs { get; set; }
    public DbSet&lt;Post&gt; Posts { get; set; }

    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
    {
        optionsBuilder.UseSqlite(&quot;Filename=./blog.db&quot;);
    }
}
````
</code></pre><ul sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="153" sourceendlinenumber="157">
<li sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="153" sourceendlinenumber="157"><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="153" sourceendlinenumber="153">Add classes to represent tables.</p>
<p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="153" sourceendlinenumber="153">  Note that we will be using foreign keys to associate many posts to one blog.</p>
  <!-- [!code-csharp[Main](samples/Platforms/NetCore/ConsoleApp.SQLite/Model.cs)] -->


</li>
</ul>
<pre sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="160" sourceendlinenumber="179"><code>````csharp
public class Blog
{
    public int BlogId { get; set; }
    public string Url { get; set; }
    public string Name { get; set; }

    public List&lt;Post&gt; Posts { get; set; }
}

public class Post
{
    public int PostId { get; set; }
    public string Title { get; set; }
    public string Content { get; set; }

    public int BlogId { get; set; }
    public Blog Blog { get; set; }
}
````
</code></pre><ul sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="181" sourceendlinenumber="183">
<li sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="181" sourceendlinenumber="183"><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="181" sourceendlinenumber="181">To make sure the files are correct, you can compile the project on the command line by running <code>dotnet build</code></p>
   <!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->


</li>
</ul>
<pre sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="186" sourceendlinenumber="188"><code>````bash
dotnet build
````
</code></pre><h2 id="create-your-database" sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="190" sourceendlinenumber="190">Create your database</h2>
<p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="192" sourceendlinenumber="192">We can now use Entity Framework command line tools to create and manage the schema of the database.</p>
<ul sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="194" sourceendlinenumber="198">
<li sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="194" sourceendlinenumber="198"><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="194" sourceendlinenumber="194">Create the first migration.</p>
<p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="194" sourceendlinenumber="194">  Execute the command below to generate your first migration. This will find our context and models, and generate a migration for us in a folder named <code>Migrations/</code></p>
   <!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->


</li>
</ul>
<pre sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="201" sourceendlinenumber="203"><code>````bash
dotnet ef migrations add MyFirstMigration
````
</code></pre><ul sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="205" sourceendlinenumber="209">
<li sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="205" sourceendlinenumber="209"><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="205" sourceendlinenumber="205">Apply the migrations.</p>
<p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="205" sourceendlinenumber="205">  You can now begin using the existing migration to create the database file and creates the tables.</p>
   <!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->


</li>
</ul>
<pre sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="212" sourceendlinenumber="216"><code>````bash
dotnet ef database update
````

This should create a new file `blog.db` in the output path. This SQLite file should now contain two empty tables.
</code></pre><div class="NOTE sourceFile=" platforms/netcore/new-db-sqlite.md"="" sourcestartlinenumber="218" sourceendlinenumber="218" "=""><h5>Note</h5><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="219" sourceendlinenumber="219">When using relative paths with SQLite, the path will be relative to the application&#39;s main assembly. In this sample, the main binary is <code>bin/Debug/netcoreapp1.0/ConsoleApp.dll</code>, so the SQLite database will be in <code>bin/Debug/netcoreapp1.0/blog.db</code></p>
</div>
<h2 id="use-your-model" sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="221" sourceendlinenumber="221">Use your model</h2>
<p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="223" sourceendlinenumber="223">Now that we have configured our model and created the database schema, we can use BloggingContext to create, update, and delete objects.</p>
<!-- [!code-csharp[Main](samples/Platforms/NetCore/ConsoleApp.SQLite/Program.cs)] -->
<pre sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="226" sourceendlinenumber="251"><code class="lang-csharp">using System;

namespace ConsoleApp.SQLite
{
    public class Program
    {
        public static void Main()
        {
            using (var db = new BloggingContext())
            {
                db.Blogs.Add(new Blog { Url = &quot;http://blogs.msdn.com/adonet&quot; });
                var count = db.SaveChanges();
                Console.WriteLine(&quot;{0} records saved to database&quot;, count);

                Console.WriteLine();
                Console.WriteLine(&quot;All blogs in database:&quot;);
                foreach (var blog in db.Blogs)
                {
                    Console.WriteLine(&quot; - {0}&quot;, blog.Url);
                }
            }
        }
    }
}
</code></pre><h2 id="start-your-app" sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="253" sourceendlinenumber="253">Start your app</h2>
<p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="255" sourceendlinenumber="255">Run the application from the command line.</p>
<p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="257" sourceendlinenumber="257">   <!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false --></p>
<pre sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="258" sourceendlinenumber="260"><code class="lang-bash">dotnet run
</code></pre><p sourcefile="platforms/netcore/new-db-sqlite.md" sourcestartlinenumber="262" sourceendlinenumber="262">After adding the new post, you can verify the data has been added by inspecting the SQLite database file, <code>bin/Debug/netcoreapp1.0/blog.db</code>.</p>

            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/shirhatti/EntityFramework.Docs/blob/export-qa-fixes/ef/platforms/netcore/new-db-sqlite.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2015-2016 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
