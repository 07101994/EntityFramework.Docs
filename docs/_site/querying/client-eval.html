<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Client vs. Server Evaluation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Client vs. Server Evaluation ">
    <meta name="generator" content="docfx 2.5.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="querying/client-eval">
              <h1 id="client-vs-server-evaluation" sourcefile="querying/client-eval.md" sourcestartlinenumber="4" sourceendlinenumber="4">Client vs. Server Evaluation</h1>
              
<div class="WARNING sourceFile=" querying/client-eval.md"="" sourcestartlinenumber="6" sourceendlinenumber="6" "=""><h5>Warning</h5><p sourcefile="querying/client-eval.md" sourcestartlinenumber="7" sourceendlinenumber="7">This documentation is for EF Core. For EF6.x and earlier release see <a href="http://msdn.com/data/ef" sourcefile="querying/client-eval.md" sourcestartlinenumber="7" sourceendlinenumber="7"><a href="http://msdn.com/data/ef" sourcefile="querying/client-eval.md" sourcestartlinenumber="7" sourceendlinenumber="7">http://msdn.com/data/ef</a></a>.</p>
</div>
<p sourcefile="querying/client-eval.md" sourcestartlinenumber="9" sourceendlinenumber="9">Entity Framework Core supports parts of the query being evaluated on the client and parts of it being pushed to the database. It is up to the database provider to determine which parts of the query will be evaluated in the database.</p>
<div class="TIP sourceFile=" querying/client-eval.md"="" sourcestartlinenumber="11" sourceendlinenumber="11" "=""><h5>Tip</h5><p sourcefile="querying/client-eval.md" sourcestartlinenumber="12" sourceendlinenumber="12">You can view this article&#39;s <a href="https://github.com/aspnet/EntityFramework.Docs/tree/master/samples/Querying" sourcefile="querying/client-eval.md" sourcestartlinenumber="12" sourceendlinenumber="12">sample</a> on GitHub.</p>
</div>
<h2 id="client-eval" sourcefile="querying/client-eval.md" sourcestartlinenumber="14" sourceendlinenumber="14">Client eval</h2>
<p sourcefile="querying/client-eval.md" sourcestartlinenumber="16" sourceendlinenumber="16">In the following example a helper method is used to standardize URLs for blogs that are returned from a SQL Server database. Because the SQL Server provider has no insight into how this method is implemented, it is not possible to translate it into SQL. All other aspects of the query are evaluated in the database, but passing the returned <code>URL</code> through this method is performed on the client.</p>
<!-- [!code-csharp[Main](samples/Querying/Querying/ClientEval/Sample.cs?highlight=6)] -->
<pre sourcefile="querying/client-eval.md" sourcestartlinenumber="19" sourceendlinenumber="28"><code class="lang-csharp">var blogs = context.Blogs
    .OrderByDescending(blog =&gt; blog.Rating)
    .Select(blog =&gt; new
    {
        Id = blog.BlogId,
        Url = StandardizeUrl(blog.Url)
    })
    .ToList();
</code></pre><!-- [!code-csharp[Main](samples/Querying/Querying/ClientEval/Sample.cs)] -->
<pre sourcefile="querying/client-eval.md" sourcestartlinenumber="31" sourceendlinenumber="43"><code class="lang-csharp">public static string StandardizeUrl(string url)
{
    url = url.ToLower();

    if (!url.StartsWith(&quot;http://&quot;))
    {
        url = string.Concat(&quot;http://&quot;, url);
    }

    return url;
}
</code></pre><h2 id="disabling-client-evaluation" sourcefile="querying/client-eval.md" sourcestartlinenumber="45" sourceendlinenumber="45">Disabling client evaluation</h2>
<p sourcefile="querying/client-eval.md" sourcestartlinenumber="47" sourceendlinenumber="47">While client evaluation can be very useful, in some instances it can result in poor performance. Consider the following query, where the helper method is now used in a filter. Because this can&#39;t be performed in the database, all the data is pulled into memory and then the filter is applied on the client. Depending on the amount of data, and how much of that data is filtered out, this could result in poor performance.</p>
<!-- [!code-csharp[Main](samples/Querying/Querying/ClientEval/Sample.cs)] -->
<pre sourcefile="querying/client-eval.md" sourcestartlinenumber="50" sourceendlinenumber="54"><code class="lang-csharp">var blogs = context.Blogs
    .Where(blog =&gt; StandardizeUrl(blog.Url).Contains(&quot;dotnet&quot;))
    .ToList();
</code></pre><p sourcefile="querying/client-eval.md" sourcestartlinenumber="56" sourceendlinenumber="56">By default, EF Core will log a warning when client evaluation is performed. See <a href="../miscellaneous/logging.html" sourcefile="querying/client-eval.md" sourcestartlinenumber="56" sourceendlinenumber="56">Logging</a> for more information on viewing logging output. You can change the behavior when client evaluation occurs to either throw or do nothing. This is done when setting up the options for your context - typically in <code>DbContext.OnConfiguring</code>, or in <code>Startup.cs</code> if you are using ASP.NET Core.</p>
<!-- [!code-csharp[Main](samples/Querying/Querying/ClientEval/ThrowOnClientEval/BloggingContext.cs?highlight=5)] -->
<pre sourcefile="querying/client-eval.md" sourcestartlinenumber="59" sourceendlinenumber="66"><code class="lang-csharp">protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
{
    optionsBuilder
        .UseSqlServer(@&quot;Server=(localdb)\mssqllocaldb;Database=EFQuerying;Trusted_Connection=True;&quot;)
        .ConfigureWarnings(warnings =&gt; warnings.Throw(RelationalEventId.QueryClientEvaluationWarning));
}
</code></pre>
            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/shirhatti/EntityFramework.Docs/blob/export-qa-fixes/ef/querying/client-eval.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright Â© 2015-2016 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
