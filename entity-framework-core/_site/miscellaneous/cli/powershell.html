<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Package Manager Console (Visual Studio) </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Package Manager Console (Visual Studio) ">
    <meta name="generator" content="docfx 2.5.4.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="miscellaneous/cli/powershell">
              <h1 id="package-manager-console-visual-studio" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="4" sourceendlinenumber="4">Package Manager Console (Visual Studio)</h1>
              
<div class="WARNING sourceFile=" miscellaneous/cli/powershell.md"="" sourcestartlinenumber="6" sourceendlinenumber="6" "=""><h5>Warning</h5><p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="7" sourceendlinenumber="7">This documentation is for EF Core. For EF6.x and earlier release see <a href="http://msdn.com/data/ef" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="7" sourceendlinenumber="7"><a href="http://msdn.com/data/ef" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="7" sourceendlinenumber="7">http://msdn.com/data/ef</a></a>.</p>
</div>
<p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="9" sourceendlinenumber="9">EF command line tools for Visual Studio&#39;s Package Manager Console (PMC) window.</p>
<div class="WARNING sourceFile=" miscellaneous/cli/powershell.md"="" sourcestartlinenumber="11" sourceendlinenumber="11" "=""><h5>Warning</h5><p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="12" sourceendlinenumber="12">The commands require the <a href="https://www.microsoft.com/en-us/download/details.aspx?id=50395" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="12" sourceendlinenumber="12">latest version of Windows PowerShell</a></p>
</div>
<h2 id="installation" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="14" sourceendlinenumber="14">Installation</h2>
<p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="16" sourceendlinenumber="16">Package Manager Console commands are installed with the <em>Microsoft.EntityFrameworkCore.Tools</em> package.</p>
<p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="18" sourceendlinenumber="18">To open the console, follow these steps.</p>
<ul sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="20" sourceendlinenumber="24">
<li sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="20" sourceendlinenumber="20"><p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="20" sourceendlinenumber="20">Open Visual Studio 2015</p>
</li>
<li sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="22" sourceendlinenumber="22"><p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="22" sourceendlinenumber="22">Tools ‣ Nuget Package Manager ‣ Package Manager Console</p>
</li>
<li sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="24" sourceendlinenumber="24"><p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="24" sourceendlinenumber="24">Execute <code>Install-Package Microsoft.EntityFrameworkCore.Tools -Pre</code></p>
</li>
</ul>
<h3 id="net-core-and-aspnet-core-projects" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="26" sourceendlinenumber="26">.NET Core and ASP.NET Core Projects</h3>
<p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="28" sourceendlinenumber="28">.NET Core and ASP.NET Core projects also require installing .NET Core CLI. See <a href="dotnet.html" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="28" sourceendlinenumber="28">.NET Core CLI</a> for more information about this installation.</p>
<div class="NOTE sourceFile=" miscellaneous/cli/powershell.md"="" sourcestartlinenumber="30" sourceendlinenumber="30" "=""><h5>Note</h5><p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="31" sourceendlinenumber="31">.NET Core CLI has known issues in Preview 1. Because PMC commands call .NET Core CLI commands, these known issues also apply to PMC commands. See <a href="dotnet.html#dotnet-cli-issues.md" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="31" sourceendlinenumber="31">Preview 2 Known Issues</a>.</p>
</div>
<div class="TIP sourceFile=" miscellaneous/cli/powershell.md"="" sourcestartlinenumber="33" sourceendlinenumber="33" "=""><h5>Tip</h5><p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="34" sourceendlinenumber="34">On .NET Core and ASP.NET Core projects, add <code>-Verbose</code> to any Package Manager Console command to see the equivalent .NET Core CLI command that was invoked.</p>
</div>
<h2 id="usage" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="36" sourceendlinenumber="36">Usage</h2>
<div class="NOTE sourceFile=" miscellaneous/cli/powershell.md"="" sourcestartlinenumber="38" sourceendlinenumber="38" "=""><h5>Note</h5><p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="39" sourceendlinenumber="39">All commands support the common parameters: <code>-Verbose</code>, <code>-Debug</code>, <code>-ErrorAction</code>, <code>-ErrorVariable</code>, <code>-WarningAction</code>, <code>-WarningVariable</code>, <code>-OutBuffer</code>, <code>-PipelineVariable</code>, and <code>-OutVariable</code>. For more information, see <a href="http://go.microsoft.com/fwlink/?LinkID=113216" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="39" sourceendlinenumber="39">about_CommonParameters</a>.</p>
</div>
<h3 id="add-migration" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="41" sourceendlinenumber="41">Add-Migration</h3>
<p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="43" sourceendlinenumber="43">Adds a new migration.</p>
<!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->
<pre sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="46" sourceendlinenumber="69"><code class="lang-text">SYNTAX
    Add-Migration [-Name] &lt;String&gt; [-OutputDir &lt;String&gt;] [-Context &lt;String&gt;] [-Project &lt;String&gt;]
     [-StartupProject &lt;String&gt;] [-Environment &lt;String&gt;] [&lt;CommonParameters&gt;]

PARAMETERS
    -Name &lt;String&gt;
        Specifies the name of the migration.

    -OutputDir &lt;String&gt;
        The directory (and sub-namespace) to use. If omitted, &quot;Migrations&quot; is used. Relative paths are relative to project directory.

    -Context &lt;String&gt;
        Specifies the DbContext to use. If omitted, the default DbContext is used.

    -Project &lt;String&gt;
        Specifies the project to use. If omitted, the default project is used.

    -StartupProject &lt;String&gt;
        Specifies the startup project to use. If omitted, the solution&#39;s startup project is used.

    -Environment &lt;String&gt;
        Specifies the environment to use. If omitted, &quot;Development&quot; is used.
</code></pre><h3 id="remove-migration" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="71" sourceendlinenumber="71">Remove-Migration</h3>
<p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="73" sourceendlinenumber="73">Removes the last migration.</p>
<!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->
<pre sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="76" sourceendlinenumber="96"><code class="lang-text">SYNTAX
    Remove-Migration [-Context &lt;String&gt;] [-Project &lt;String&gt;] [-StartupProject &lt;String&gt;] [-Environment &lt;String&gt;]
     [-Force] [&lt;CommonParameters&gt;]

PARAMETERS
    -Context &lt;String&gt;
        Specifies the DbContext to use. If omitted, the default DbContext is used.

    -Project &lt;String&gt;
        Specifies the project to use. If omitted, the default project is used.

    -StartupProject &lt;String&gt;
        Specifies the startup project to use. If omitted, the solution&#39;s startup project is used.

    -Environment &lt;String&gt;
        Specifies the environment to use. If omitted, &quot;Development&quot; is used.

    -Force [&lt;SwitchParameter&gt;]
        Removes the last migration without checking the database. If the last migration has been applied to the database, you will need to manually reverse the changes it made.
</code></pre><h3 id="scaffold-dbcontext" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="98" sourceendlinenumber="98">Scaffold-DbContext</h3>
<p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="100" sourceendlinenumber="100">Scaffolds a DbContext and entity type classes for a specified database.</p>
<!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->
<pre sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="103" sourceendlinenumber="142"><code class="lang-text">SYNTAX
    Scaffold-DbContext [-Connection] &lt;String&gt; [-Provider] &lt;String&gt; [-OutputDir &lt;String&gt;] [-Context &lt;String&gt;]
      [-Schemas &lt;String&gt;] [-Tables &lt;String&gt;] [-DataAnnotations] [-Force] [-Project &lt;String&gt;]
      [-StartupProject &lt;String&gt;] [-Environment &lt;String&gt;] [&lt;CommonParameters&gt;]

PARAMETERS
    -Connection &lt;String&gt;
        Specifies the connection string of the database.

    -Provider &lt;String&gt;
        Specifies the provider to use. For example, Microsoft.EntityFrameworkCore.SqlServer.

    -OutputDir &lt;String&gt;
        Specifies the directory to use to output the classes. If omitted, the top-level project directory is used.

    -Context &lt;String&gt;
        Specifies the name of the generated DbContext class.

    -Schemas &lt;String&gt;
        Specifies the schemas for which to generate classes.

    -Tables &lt;String&gt;
        Specifies the tables for which to generate classes.

    -DataAnnotations [&lt;SwitchParameter&gt;]
        Use DataAnnotation attributes to configure the model where possible. If omitted, the output code will use only the fluent API.

    -Force [&lt;SwitchParameter&gt;]
        Force scaffolding to overwrite existing files. Otherwise, the code will only proceed if no output files would be overwritten.

    -Project &lt;String&gt;
        Specifies the project to use. If omitted, the default project is used.

    -StartupProject &lt;String&gt;
        Specifies the startup project to use. If omitted, the solution&#39;s startup project is used.

    -Environment &lt;String&gt;
        Specifies the environment to use. If omitted, &quot;Development&quot; is used.
</code></pre><h3 id="script-migration" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="144" sourceendlinenumber="144">Script-Migration</h3>
<p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="146" sourceendlinenumber="146">Generates a SQL script from migrations.</p>
<!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->
<pre sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="149" sourceendlinenumber="178"><code class="lang-text">SYNTAX
    Script-Migration -From &lt;String&gt; -To &lt;String&gt; [-Idempotent] [-Context &lt;String&gt;] [-Project &lt;String&gt;]
      [-StartupProject &lt;String&gt;] [-Environment &lt;String&gt;] [&lt;CommonParameters&gt;]

    Script-Migration [-From &lt;String&gt;] [-Idempotent] [-Context &lt;String&gt;] [-Project &lt;String&gt;]
      [-StartupProject &lt;String&gt;] [-Environment &lt;String&gt;] [&lt;CommonParameters&gt;]

PARAMETERS
    -From &lt;String&gt;
        Specifies the starting migration. If omitted, &#39;0&#39; (the initial database) is used.

    -To &lt;String&gt;
        Specifies the ending migration. If omitted, the last migration is used.

    -Idempotent [&lt;SwitchParameter&gt;]
        Generates an idempotent script that can be used on a database at any migration.

    -Context &lt;String&gt;
        Specifies the DbContext to use. If omitted, the default DbContext is used.

    -Project &lt;String&gt;
        Specifies the project to use. If omitted, the default project is used.

    -StartupProject &lt;String&gt;
        Specifies the startup project to use. If omitted, the solution&#39;s startup project is used.

    -Environment &lt;String&gt;
        Specifies the environment to use. If omitted, &quot;Development&quot; is used.
</code></pre><h3 id="update-database" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="180" sourceendlinenumber="180">Update-Database</h3>
<p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="182" sourceendlinenumber="182">Updates the database to a specified migration.</p>
<!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->
<pre sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="185" sourceendlinenumber="205"><code class="lang-text">SYNTAX
    Update-Database [[-Migration] &lt;String&gt;] [-Context &lt;String&gt;] [-Project &lt;String&gt;] [-StartupProject &lt;String&gt;]
      [-Environment &lt;String&gt;] [&lt;CommonParameters&gt;]

PARAMETERS
    -Migration &lt;String&gt;
        Specifies the target migration. If &#39;0&#39;, all migrations will be reverted. If omitted, all pending migrations will be applied.

    -Context &lt;String&gt;
        Specifies the DbContext to use. If omitted, the default DbContext is used.

    -Project &lt;String&gt;
        Specifies the project to use. If omitted, the default project is used.

    -StartupProject &lt;String&gt;
        Specifies the startup project to use. If omitted, the solution&#39;s startup project is used.

    -Environment &lt;String&gt;
        Specifies the environment to use. If omitted, &quot;Development&quot; is used.
</code></pre><h3 id="use-dbcontext" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="207" sourceendlinenumber="207">Use-DbContext</h3>
<p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="209" sourceendlinenumber="209">Sets the default DbContext to use.</p>
<!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->
<pre sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="212" sourceendlinenumber="229"><code class="lang-text">SYNTAX
    Use-DbContext [-Context] &lt;String&gt; [-Project &lt;String&gt;] [-StartupProject &lt;String&gt;] [-Environment &lt;String&gt;]
      [&lt;CommonParameters&gt;]

PARAMETERS
    -Context &lt;String&gt;
        Specifies the DbContext to use.

    -Project &lt;String&gt;
        Specifies the project to use. If omitted, the default project is used.

    -StartupProject &lt;String&gt;
        Specifies the startup project to use. If omitted, the solution&#39;s startup project is used.

    -Environment &lt;String&gt;
        Specifies the environment to use. If omitted, &quot;Development&quot; is used.
</code></pre><h2 id="using-ef-core-commands-and-ef-6-commands-side-by-side" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="231" sourceendlinenumber="231">Using EF Core commands and EF 6 commands side-by-side</h2>
<p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="233" sourceendlinenumber="233">EF Core commands do not work on EF 6 or earlier version of EF. However, EF Core re-uses some of the same command names from these earlier versions. These commands can be installed side-by-side, however, EF does not automatically know which version of the command to use. This is solved by prefixing the command with the module name. The EF 6 commands PowerShell module is named &quot;EntityFramework&quot;, and the EF Core module is named &quot;EntityFrameworkCore&quot;. Without the prefix, PowerShell may call the wrong version of the command.</p>
<!-- literal_block"language": "csharp",rShell", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->
<pre sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="236" sourceendlinenumber="242"><code class="lang-PowerShell"># Invokes the EF Core command
PS&gt; EntityFrameworkCore\Add-Migration

# Invokes the EF 6 command
PS&gt; EntityFramework\Add-Migration
</code></pre><h2 id="common-errors" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="244" sourceendlinenumber="244">Common Errors</h2>
<h3 id="error-no-parameterless-constructor-was-found" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="246" sourceendlinenumber="246">Error: &quot;No parameterless constructor was found&quot;</h3>
<p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="248" sourceendlinenumber="248">Design-time tools attempt to automatically find how your application creates instances of your DbContext type. If EF cannot find a suitable way to initialize your DbContext, you may encounter this error.</p>
<!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->
<pre sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="251" sourceendlinenumber="255"><code>No parameterless constructor was found on &#39;TContext&#39;. Either add a parameterless constructor to
&#39;TContext&#39; or add an implementation of &#39;IDbContextFactory&lt;TContext&gt;&#39; in the same assembly as
&#39;TContext&#39;.
</code></pre><p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="257" sourceendlinenumber="257">As the error message suggests, one solution is to add an implementation of <code>IDbContextFactory&lt;TContext&gt;</code> to the current project. See <a href="../configuring-dbcontext.html#use-idbcontextfactory.md" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="257" sourceendlinenumber="257">Using IDbContextFactory<tcontext></tcontext></a> for an example of how to create this factory.</p>
<p sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="259" sourceendlinenumber="259">See also <a href="dotnet.html#dotnet-cli-issues.md" sourcefile="miscellaneous/cli/powershell.md" sourcestartlinenumber="259" sourceendlinenumber="259">Preview 2 Known Issues</a> for .NET Core CLI commands.</p>

            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/shirhatti/EntityFramework.Docs/blob/export-qa-fixes/ef/miscellaneous/cli/powershell.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2015-2016 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
