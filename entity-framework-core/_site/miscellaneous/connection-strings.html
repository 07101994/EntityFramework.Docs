<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Connection Strings </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Connection Strings ">
    <meta name="generator" content="docfx 2.5.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="miscellaneous/connection-strings">
              <h1 id="connection-strings" sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="4" sourceendlinenumber="4">Connection Strings</h1>
              
<div class="WARNING sourceFile=" miscellaneous/connection-strings.md"="" sourcestartlinenumber="6" sourceendlinenumber="6" "=""><h5>Warning</h5><p sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="7" sourceendlinenumber="7">This documentation is for EF Core. For EF6.x and earlier release see <a href="http://msdn.com/data/ef" sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="7" sourceendlinenumber="7"><a href="http://msdn.com/data/ef" sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="7" sourceendlinenumber="7">http://msdn.com/data/ef</a></a>.</p>
</div>
<p sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="9" sourceendlinenumber="9">Most database providers require some form of connection string to connect to the database. Sometimes this connection string contains sensitive information that needs to be protected. You may also need to change the connection string as you move your application between environments, such as development, testing, and production.</p>
<h2 id="full-net-applications" sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="11" sourceendlinenumber="11">Full .NET Applications</h2>
<p sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="13" sourceendlinenumber="13">Full .NET applications, such as WinForms, WPF, Console, and ASP.NET 4, have a tried and tested connection string pattern. The connection string should be added to your applications App.config file (Web.config if you are using ASP.NET). If your connection string contains sensitive information, such as username and password, you can protect the contents of the configuration file using <a href="https://msdn.microsoft.com/en-us/library/53tyfkaw.aspx" sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="13" sourceendlinenumber="13">Protected Configuration</a>.</p>
<!-- literal_block"language": "csharp", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": true -->
<pre sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="16" sourceendlinenumber="25"><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;configuration&gt;

  &lt;connectionStrings&gt;
    &lt;add name=&quot;BloggingDatabase&quot;
         connectionString=&quot;Server=(localdb)\mssqllocaldb;Database=Blogging;Trusted_Connection=True;&quot; /&gt;
  &lt;/connectionStrings&gt;
&lt;/configuration&gt;
</code></pre><div class="NOTE sourceFile=" miscellaneous/connection-strings.md"="" sourcestartlinenumber="27" sourceendlinenumber="27" "=""><h5>Note</h5><p sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="28" sourceendlinenumber="28">The <code>providerName</code> setting is not required on EF Core connection strings stored in App.config because the database provider is configured via code.</p>
</div>
<p sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="30" sourceendlinenumber="30">You can then read the connection string using the <code>ConfigurationManager</code> API in your context&#39;s <code>OnConfiguring</code> method. You may need to add a reference to the <code>System.Configuration</code> framework assembly to be able to use this API.</p>
<!-- literal_block"language": "csharp", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": true -->
<pre sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="33" sourceendlinenumber="44"><code class="lang-csharp">public class BloggingContext : DbContext
{
    public DbSet&lt;Blog&gt; Blogs { get; set; }
    public DbSet&lt;Post&gt; Posts { get; set; }

    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
    {
      optionsBuilder.UseSqlServer(ConfigurationManager.ConnectionStrings[&quot;BloggingDatabase&quot;].ConnectionString);
    }
}
</code></pre><h2 id="universal-windows-platform-uwp" sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="46" sourceendlinenumber="46">Universal Windows Platform (UWP)</h2>
<p sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="48" sourceendlinenumber="48">Connection strings in a UWP application are typically a SQLite connection that just specifies a local filename. They typically do not contain sensitive information, and do not need to be changed as an application is deployed. As such, these connection strings are usually fine to be left in code, as shown below. If you wish to move them out of code then UWP supports the concept of settings, see the <a href="https://msdn.microsoft.com/windows/uwp/app-settings/store-and-retrieve-app-data" sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="48" sourceendlinenumber="48">App Settings section of the UWP documentation</a> for details.</p>
<!-- literal_block"language": "csharp", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": true -->
<pre sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="51" sourceendlinenumber="62"><code class="lang-csharp">public class BloggingContext : DbContext
{
    public DbSet&lt;Blog&gt; Blogs { get; set; }
    public DbSet&lt;Post&gt; Posts { get; set; }

    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
    {
            optionsBuilder.UseSqlite(&quot;Filename=Blogging.db&quot;);
    }
}
</code></pre><h2 id="aspnet-core" sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="64" sourceendlinenumber="64">ASP.NET Core</h2>
<p sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="66" sourceendlinenumber="66">In ASP.NET Core the configuration system is very flexible, and the connection string could be stored in <code>appsettings.json</code>, an environment variable, the user secret store, or another configuration source. See the <a href="https://docs.asp.net/en/latest/fundamentals/configuration.html" sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="66" sourceendlinenumber="66">Configuration section of the ASP.NET Core documentation</a> for more details. The following example shows the connection string stored in <code>appsettings.json</code>.</p>
<!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": true -->
<pre sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="69" sourceendlinenumber="75"><code class="lang-json">{
  &quot;ConnectionStrings&quot;: {
    &quot;BloggingDatabase&quot;: &quot;Server=(localdb)\\mssqllocaldb;Database=EFGetStarted.ConsoleApp.NewDb;Trusted_Connection=True;&quot;
  },
}
</code></pre><p sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="77" sourceendlinenumber="77">The context is typically configured in <code>Startup.cs</code> with the connection string being read from configuration. Note the <code>GetConnectionString()</code> method simply looks for a configuration value whose key is <code>ConnectionStrings:&lt;connection string name&gt;</code>.</p>
<!-- literal_block"language": "csharp", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": true -->
<pre sourcefile="miscellaneous/connection-strings.md" sourcestartlinenumber="80" sourceendlinenumber="86"><code class="lang-csharp">public void ConfigureServices(IServiceCollection services)
{
    services.AddDbContext&lt;BloggingContext&gt;(options =&gt;
        options.UseSqlServer(Configuration.GetConnectionString(&quot;BloggingDatabase&quot;)));
}
</code></pre>
            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/shirhatti/EntityFramework.Docs/blob/export-qa-fixes/ef/miscellaneous/connection-strings.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2015-2016 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
