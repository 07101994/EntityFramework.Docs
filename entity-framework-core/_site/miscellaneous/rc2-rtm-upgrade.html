<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Upgrading from RC2 to RTM </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Upgrading from RC2 to RTM ">
    <meta name="generator" content="docfx 2.5.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="miscellaneous/rc2-rtm-upgrade">
              <h1 id="upgrading-from-rc2-to-rtm" sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="4" sourceendlinenumber="4">Upgrading from RC2 to RTM</h1>
              
<div class="WARNING sourceFile=" miscellaneous/rc2-rtm-upgrade.md"="" sourcestartlinenumber="6" sourceendlinenumber="6" "=""><h5>Warning</h5><p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="7" sourceendlinenumber="7">This documentation is for EF Core. For EF6.x and earlier release see <a href="http://msdn.com/data/ef" sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="7" sourceendlinenumber="7"><a href="http://msdn.com/data/ef" sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="7" sourceendlinenumber="7">http://msdn.com/data/ef</a></a>.</p>
</div>
<p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="9" sourceendlinenumber="9">This article provides guidance for moving an application built with the RC2 packages to 1.0.0 RTM.</p>
<h2 id="package-versions" sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="11" sourceendlinenumber="11">Package Versions</h2>
<p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="13" sourceendlinenumber="13">The names of the top level packages that you would typically install into an application did not change between RC2 and RTM.</p>
<p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="15" sourceendlinenumber="15"><strong>You need to upgrade the installed packages to the RTM versions:</strong></p>
<ul sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="17" sourceendlinenumber="19">
<li sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="17" sourceendlinenumber="17"><p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="17" sourceendlinenumber="17">Runtime packages (e.g. <code>Microsoft.EntityFrameworkCore.SqlServer</code>) changed from <code>1.0.0-rc2-final</code> to <code>1.0.0</code>.</p>
</li>
<li sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="19" sourceendlinenumber="19"><p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="19" sourceendlinenumber="19">The <code>Microsoft.EntityFrameworkCore.Tools</code> package changed from <code>1.0.0-preview1-final</code> to <code>1.0.0-preview2-final</code>. Note that tooling is still pre-release.</p>
</li>
</ul>
<h2 id="existing-migrations-may-need-maxlength-added" sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="21" sourceendlinenumber="21">Existing migrations may need maxLength added</h2>
<p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="23" sourceendlinenumber="23">In RC2, the column definition in a migration looked like <code>table.Column&lt;string&gt;(nullable: true)</code> and the length of the column was looked up in some metadata we store in the code behind the migration. In RTM, the length is now included in the scaffolded code <code>table.Column&lt;string&gt;(maxLength: 450, nullable: true)</code>.</p>
<p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="25" sourceendlinenumber="25">Any existing migrations that were scaffolded prior to using RTM will not have the <code>maxLength</code> argument specified. This means the maximum length supported by the database will be used (<code>nvarchar(max)</code> on SQL Server). This may be fine for some columns, but columns that are part of a key, foreign key, or index need to be updated to include a maximum length. By convention, 450 is the maximum length used for keys, foreign keys, and indexed columns. If you have explicitly configured a length in the model, then you should use that length instead.</p>
<p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="27" sourceendlinenumber="27"><strong>ASP.NET Identity</strong></p>
<p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="29" sourceendlinenumber="29">This change impacts projects that use ASP.NET Identity and were created from a pre-RTM project template. The project template includes a migration used to create the database. This migration must be edited to specify a maximum length of <code>256</code> for the following columns.</p>
<ul sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="31" sourceendlinenumber="45">
<li sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="31" sourceendlinenumber="35"><p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="31" sourceendlinenumber="31"><strong>AspNetRoles</strong></p>
<ul sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="33" sourceendlinenumber="35">
<li sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="33" sourceendlinenumber="33"><p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="33" sourceendlinenumber="33">Name</p>
</li>
<li sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="35" sourceendlinenumber="35"><p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="35" sourceendlinenumber="35">NormalizedName</p>
</li>
</ul>
</li>
<li sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="37" sourceendlinenumber="45"><p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="37" sourceendlinenumber="37"><strong>AspNetUsers</strong></p>
<ul sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="39" sourceendlinenumber="45">
<li sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="39" sourceendlinenumber="39"><p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="39" sourceendlinenumber="39">Email</p>
</li>
<li sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="41" sourceendlinenumber="41"><p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="41" sourceendlinenumber="41">NormalizedEmail</p>
</li>
<li sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="43" sourceendlinenumber="43"><p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="43" sourceendlinenumber="43">NormalizedUserName</p>
</li>
<li sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="45" sourceendlinenumber="45"><p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="45" sourceendlinenumber="45">UserName</p>
</li>
</ul>
</li>
</ul>
<p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="47" sourceendlinenumber="47">Failure to make this change will result in the following exception when the initial migration is applied to a database.</p>
<pre sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="49" sourceendlinenumber="49"><code>System.Data.SqlClient.SqlException (0x80131904): Column &#39;NormalizedName&#39; in table &#39;AspNetRoles&#39; is of a type that is invalid for use as a key column in an index.
</code></pre><h2 id="net-core-remove-imports-in-projectjson" sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="51" sourceendlinenumber="51">.NET Core: Remove &quot;imports&quot; in project.json</h2>
<p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="53" sourceendlinenumber="53">If you were targeting .NET Core with RC2, you needed to add <code>imports</code> to project.json as a temporary workaround for some of EF Core&#39;s dependencies not supporting .NET Standard. These can now be removed.</p>
<!-- literal_block"language": "csharp",", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args"h1_lines":4}, "ids  "linenos": false -->
<pre sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="56" sourceendlinenumber="63"><code class="lang-json">{
  &quot;frameworks&quot;: {
    &quot;netcoreapp1.0&quot;: {
      &quot;imports&quot;: [&quot;dnxcore50&quot;, &quot;portable-net451+win8&quot;]
    }
}
</code></pre><h2 id="uwp-add-binding-redirects" sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="65" sourceendlinenumber="65">UWP: Add binding redirects</h2>
<p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="67" sourceendlinenumber="67">Attempting to run EF commands on Universal Windows Platform (UWP) projects results in the following error:</p>
<pre sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="69" sourceendlinenumber="69"><code>System.IO.FileLoadException: Could not load file or assembly &#39;System.IO.FileSystem.Primitives, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&#39; or one of its dependencies. The located assembly&#39;s manifest definition does not match the assembly reference.
</code></pre><p sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="71" sourceendlinenumber="71">You need to manually add binding redirects to the UWP project. Create a file named <code>App.config</code> in the project root folder and add redirects to the correct assembly versions.</p>
<!-- literal_block"language": "csharp", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->
<pre sourcefile="miscellaneous/rc2-rtm-upgrade.md" sourcestartlinenumber="74" sourceendlinenumber="95"><code class="lang-xml">&lt;configuration&gt;
 &lt;runtime&gt;
   &lt;assemblyBinding xmlns=&quot;urn:schemas-microsoft-com:asm.v1&quot;&gt;
     &lt;dependentAssembly&gt;
       &lt;assemblyIdentity name=&quot;System.IO.FileSystem.Primitives&quot;
                         publicKeyToken=&quot;b03f5f7f11d50a3a&quot;
                         culture=&quot;neutral&quot; /&gt;
       &lt;bindingRedirect oldVersion=&quot;4.0.0.0&quot;
                        newVersion=&quot;4.0.1.0&quot;/&gt;
     &lt;/dependentAssembly&gt;
     &lt;dependentAssembly&gt;
       &lt;assemblyIdentity name=&quot;System.Threading.Overlapped&quot;
                         publicKeyToken=&quot;b03f5f7f11d50a3a&quot;
                         culture=&quot;neutral&quot; /&gt;
       &lt;bindingRedirect oldVersion=&quot;4.0.0.0&quot;
                        newVersion=&quot;4.0.1.0&quot;/&gt;
     &lt;/dependentAssembly&gt;
   &lt;/assemblyBinding&gt;
 &lt;/runtime&gt;
&lt;/configuration&gt;
</code></pre>
            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/shirhatti/EntityFramework.Docs/blob/export-qa-fixes/ef/miscellaneous/rc2-rtm-upgrade.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2015-2016 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
