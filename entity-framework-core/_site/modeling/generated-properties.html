<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Generated Properties </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Generated Properties ">
    <meta name="generator" content="docfx 2.5.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="modeling/generated-properties">
              <h1 id="generated-properties" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="4" sourceendlinenumber="4">Generated Properties</h1>
              
<div class="WARNING sourceFile=" modeling/generated-properties.md"="" sourcestartlinenumber="6" sourceendlinenumber="6" "=""><h5>Warning</h5><p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="7" sourceendlinenumber="7">This documentation is for EF Core. For EF6.x and earlier release see <a href="http://msdn.com/data/ef" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="7" sourceendlinenumber="7"><a href="http://msdn.com/data/ef" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="7" sourceendlinenumber="7">http://msdn.com/data/ef</a></a>.</p>
</div>
<h2 id="value-generation-patterns" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="9" sourceendlinenumber="9">Value Generation Patterns</h2>
<p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="11" sourceendlinenumber="11">There are three value generation patterns that can be used for properties.</p>
<h3 id="no-value-generation" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="13" sourceendlinenumber="13">No value generation</h3>
<p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="15" sourceendlinenumber="15">No value generation means that you will always supply a valid value to be saved to the database. This valid value must be assigned to new entities before they are added to the context.</p>
<h3 id="value-generated-on-add" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="17" sourceendlinenumber="17">Value generated on add</h3>
<p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="19" sourceendlinenumber="19">Value generated on add means that a value is generated for new entities.</p>
<div class="WARNING sourceFile=" modeling/generated-properties.md"="" sourcestartlinenumber="21" sourceendlinenumber="21" "=""><h5>Warning</h5><p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="22" sourceendlinenumber="22">How the value is generated for added entities will depend on the database provider being used. Database providers may automatically setup value generation for some property types, but others may require you to manually setup how the value is generated.</p>
<p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="24" sourceendlinenumber="24">For example, when using SQL Server, values will be automatically generated for <em>GUID</em> properties (using the SQL Server sequential GUID algorithm). However, if you specify that a <em>DateTime</em> property is generated on add, then you must setup a way for the values to be generated (such as setting default value SQL of <em>GETDATE()</em>, see <a href="relational/default-values.html" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="24" sourceendlinenumber="24">Default Values</a>).</p>
</div>
<p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="26" sourceendlinenumber="26">If you add an entity to the context that has a value assigned to the primary key property, then EF will attempt to insert that value rather than generating a new one. A property is considered to have a value assigned if it is not assigned the CLR default value (<code>null</code> for <code>string</code>, <code>0</code> for <code>int</code>, <code>Guid.Empty</code> for <code>Guid</code>, etc.).</p>
<p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="28" sourceendlinenumber="28">Depending on the database provider being used, values may be generated client side by EF or in the database. If the value is generated by the database, then EF may assign a temporary value when you add the entity to the context. This temporary value will then be replaced by the database generated value during <code>SaveChanges</code>.</p>
<h3 id="value-generated-on-add-or-update" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="30" sourceendlinenumber="30">Value generated on add or update</h3>
<p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="32" sourceendlinenumber="32">Value generated on add or update means that a new value is generated every time the record is saved (insert or update).</p>
<div class="WARNING sourceFile=" modeling/generated-properties.md"="" sourcestartlinenumber="34" sourceendlinenumber="34" "=""><h5>Warning</h5><p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="35" sourceendlinenumber="35">How the value is generated for added and updated entities will depend on the database provider being used. Database providers may automatically setup value generation for some property types, while others will require you to manually setup how the value is generated.</p>
<p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="37" sourceendlinenumber="37">For example, when using SQL Server, <em>byte[]</em> properties that are set as generated on add or update and marked as concurrency tokens, will be setup with the <em>rowversion</em> data type - so that values will be generated in the database. However, if you specify that a <em>DateTime</em> property is generated on add or update, then you must setup a way for the values to be generated (such as a database trigger).</p>
</div>
<p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="39" sourceendlinenumber="39">Like &#39;value generated on add&#39;, if you specify a value for the property on a newly added instance of an entity, that value will be inserted rather than a value being generated. Also, if you explicitly change the value assigned to the property (thus marking it as modified) then that new value will be set in the database rather than a value being generated.</p>
<h2 id="conventions" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="41" sourceendlinenumber="41">Conventions</h2>
<p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="43" sourceendlinenumber="43">By convention, primary keys that are of an integer or GUID data type will be setup to have values generated on add. All other properties will be setup with no value generation.</p>
<h2 id="data-annotations" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="45" sourceendlinenumber="45">Data Annotations</h2>
<h3 id="no-value-generation-data-annotations" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="47" sourceendlinenumber="47">No value generation (Data Annotations)</h3>
<!-- [!code-csharp[Main](samples/Modeling/DataAnnotations/Samples/ValueGeneratedNever.cs?highlight=3)] -->
<pre sourcefile="modeling/generated-properties.md" sourcestartlinenumber="50" sourceendlinenumber="57"><code class="lang-csharp">public class Blog
{
    [DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int BlogId { get; set; }
    public string Url { get; set; }
}
</code></pre><h3 id="value-generated-on-add-data-annotations" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="59" sourceendlinenumber="59">Value generated on add (Data Annotations)</h3>
<!-- [!code-csharp[Main](samples/Modeling/DataAnnotations/Samples/ValueGeneratedOnAdd.cs?highlight=5)] -->
<pre sourcefile="modeling/generated-properties.md" sourcestartlinenumber="62" sourceendlinenumber="70"><code class="lang-csharp">public class Blog
{
    public int BlogId { get; set; }
    public string Url { get; set; }
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public DateTime Inserted { get; set; }
}
</code></pre><div class="WARNING sourceFile=" modeling/generated-properties.md"="" sourcestartlinenumber="72" sourceendlinenumber="72" "=""><h5>Warning</h5><p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="73" sourceendlinenumber="73">This just lets EF know that values are generated for added entities, it does not guarantee that EF will setup the actual mechanism to generate values. See <a href="#value-generated-on-add" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="73" sourceendlinenumber="73">Value generated on add</a> section for more details.</p>
</div>
<h3 id="value-generated-on-add-or-update-data-annotations" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="75" sourceendlinenumber="75">Value generated on add or update (Data Annotations)</h3>
<!-- [!code-csharp[Main](samples/Modeling/DataAnnotations/Samples/ValueGeneratedOnAddOrUpdate.cs?highlight=5)] -->
<pre sourcefile="modeling/generated-properties.md" sourcestartlinenumber="78" sourceendlinenumber="86"><code class="lang-csharp">public class Blog
{
    public int BlogId { get; set; }
    public string Url { get; set; }
    [DatabaseGenerated(DatabaseGeneratedOption.Computed)]
    public DateTime LastUpdated { get; set; }
}
</code></pre><div class="WARNING sourceFile=" modeling/generated-properties.md"="" sourcestartlinenumber="88" sourceendlinenumber="88" "=""><h5>Warning</h5><p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="89" sourceendlinenumber="89">This just lets EF know that values are generated for added or updated entities, it does not guarantee that EF will setup the actual mechanism to generate values. See <a href="#value-generated-on-add-or-update" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="89" sourceendlinenumber="89">Value generated on add or update</a> section for more details.</p>
</div>
<h2 id="fluent-api" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="91" sourceendlinenumber="91">Fluent API</h2>
<p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="93" sourceendlinenumber="93">You can use the Fluent API to change the value generation pattern for a given property.</p>
<h3 id="no-value-generation-fluent-api" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="95" sourceendlinenumber="95">No value generation (Fluent API)</h3>
<!-- [!code-csharp[Main](samples/Modeling/FluentAPI/Samples/ValueGeneratedNever.cs?highlight=7,8,9)] -->
<pre sourcefile="modeling/generated-properties.md" sourcestartlinenumber="98" sourceendlinenumber="116"><code class="lang-csharp">class MyContext : DbContext
{
    public DbSet&lt;Blog&gt; Blogs { get; set; }

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.Entity&lt;Blog&gt;()
            .Property(b =&gt; b.BlogId)
            .ValueGeneratedNever();
    }
}

public class Blog
{
    public int BlogId { get; set; }
    public string Url { get; set; }
}
</code></pre><h3 id="value-generated-on-add-fluent-api" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="118" sourceendlinenumber="118">Value generated on add (Fluent API)</h3>
<!-- [!code-csharp[Main](samples/Modeling/FluentAPI/Samples/ValueGeneratedOnAdd.cs?highlight=7,8,9)] -->
<pre sourcefile="modeling/generated-properties.md" sourcestartlinenumber="121" sourceendlinenumber="140"><code class="lang-csharp">class MyContext : DbContext
{
    public DbSet&lt;Blog&gt; Blogs { get; set; }

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.Entity&lt;Blog&gt;()
            .Property(b =&gt; b.Inserted)
            .ValueGeneratedOnAdd();
    }
}

public class Blog
{
    public int BlogId { get; set; }
    public string Url { get; set; }
    public DateTime Inserted { get; set; }
}
</code></pre><div class="WARNING sourceFile=" modeling/generated-properties.md"="" sourcestartlinenumber="142" sourceendlinenumber="142" "=""><h5>Warning</h5><p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="143" sourceendlinenumber="143">This just lets EF know that values are generated for added entities, it does not guarantee that EF will setup the actual mechanism to generate values. See <a href="#value-generated-on-add" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="143" sourceendlinenumber="143">Value generated on add</a> section for more details.</p>
</div>
<h3 id="value-generated-on-add-or-update-fluent-api" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="145" sourceendlinenumber="145">Value generated on add or update (Fluent API)</h3>
<!-- [!code-csharp[Main](samples/Modeling/FluentAPI/Samples/ValueGeneratedOnAddOrUpdate.cs?highlight=7,8,9)] -->
<pre sourcefile="modeling/generated-properties.md" sourcestartlinenumber="148" sourceendlinenumber="167"><code class="lang-csharp">class MyContext : DbContext
{
    public DbSet&lt;Blog&gt; Blogs { get; set; }

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.Entity&lt;Blog&gt;()
            .Property(b =&gt; b.LastUpdated)
            .ValueGeneratedOnAddOrUpdate();
    }
}

public class Blog
{
    public int BlogId { get; set; }
    public string Url { get; set; }
    public DateTime LastUpdated { get; set; }
}
</code></pre><div class="WARNING sourceFile=" modeling/generated-properties.md"="" sourcestartlinenumber="169" sourceendlinenumber="169" "=""><h5>Warning</h5><p sourcefile="modeling/generated-properties.md" sourcestartlinenumber="170" sourceendlinenumber="170">This just lets EF know that values are generated for added or updated entities, it does not guarantee that EF will setup the actual mechanism to generate values. See <a href="#value-generated-on-add-or-update" sourcefile="modeling/generated-properties.md" sourcestartlinenumber="170" sourceendlinenumber="170">Value generated on add or update</a> section for more details.</p>
</div>

            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/shirhatti/EntityFramework.Docs/blob/export-qa-fixes/ef/modeling/generated-properties.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2015-2016 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
