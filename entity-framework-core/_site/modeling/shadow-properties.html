<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Shadow Properties </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Shadow Properties ">
    <meta name="generator" content="docfx 2.5.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="modeling/shadow-properties">
              <h1 id="shadow-properties" sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="4" sourceendlinenumber="4">Shadow Properties</h1>
              
<div class="WARNING sourceFile=" modeling/shadow-properties.md"="" sourcestartlinenumber="6" sourceendlinenumber="6" "=""><h5>Warning</h5><p sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="7" sourceendlinenumber="7">This documentation is for EF Core. For EF6.x and earlier release see <a href="http://msdn.com/data/ef" sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="7" sourceendlinenumber="7"><a href="http://msdn.com/data/ef" sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="7" sourceendlinenumber="7">http://msdn.com/data/ef</a></a>.</p>
</div>
<p sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="9" sourceendlinenumber="9">Shadow properties are properties that do not exist in your entity class. The value and state of these properties is maintained purely in the Change Tracker.</p>
<p sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="11" sourceendlinenumber="11">Shadow property values can be obtained and changed through the <code>ChangeTracker</code> API.</p>
<!-- literal_block"language": "csharp",rp", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->
<pre sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="14" sourceendlinenumber="16"><code class="lang-csharp">   context.Entry(myBlog).Property(&quot;LastUpdated&quot;).CurrentValue = DateTime.Now;
</code></pre><p sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="18" sourceendlinenumber="18">Shadow properties can be referenced in LINQ queries via the <code>EF.Property</code> static method.</p>
<!-- literal_block"language": "csharp",rp", "xml:space": "preserve", "classes  "backrefs  "names  "dupnames  highlight_args}, "ids  "linenos": false -->
<pre sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="21" sourceendlinenumber="24"><code class="lang-csharp">var blogs = context.Blogs
    .OrderBy(b =&gt; EF.Property&lt;DateTime&gt;(b, &quot;LastUpdated&quot;));
</code></pre><h2 id="conventions" sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="26" sourceendlinenumber="26">Conventions</h2>
<p sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="28" sourceendlinenumber="28">By convention, shadow properties are only created when a relationship is discovered but no foreign key property is found in the dependent entity class. In this case, a shadow foreign key property will be introduced. The shadow foreign key property will be named <code>&lt;navigation property name&gt;&lt;principal key property name&gt;</code> (the navigation on the dependent entity, which points to the principal entity, is used for the naming). If the principal key property name includes the name of the navigation property, then the name will just be <code>&lt;principal key property name&gt;</code>. If there is no navigation property on the dependent entity, then the principal type name is used in its place.</p>
<p sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="30" sourceendlinenumber="30">For example, the following code listing will result in a <code>BlogId</code> shadow property being introduced to the <code>Post</code> entity.</p>
<!-- [!code-csharp[Main](samples/Modeling/Conventions/Samples/ShadowForeignKey.cs)] -->
<pre sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="33" sourceendlinenumber="56"><code class="lang-csharp">class MyContext : DbContext
{
    public DbSet&lt;Blog&gt; Blogs { get; set; }
    public DbSet&lt;Post&gt; Posts { get; set; }
}

public class Blog
{
    public int BlogId { get; set; }
    public string Url { get; set; }

    public List&lt;Post&gt; Posts { get; set; }
}

public class Post
{
    public int PostId { get; set; }
    public string Title { get; set; }
    public string Content { get; set; }

    public Blog Blog { get; set; }
}
</code></pre><h2 id="data-annotations" sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="58" sourceendlinenumber="58">Data Annotations</h2>
<p sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="60" sourceendlinenumber="60">Shadow properties can not be created with data annotations.</p>
<h2 id="fluent-api" sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="62" sourceendlinenumber="62">Fluent API</h2>
<p sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="64" sourceendlinenumber="64">You can use the Fluent API to configure shadow properties. Once you have called the string overload of <code>Property</code> you can chain any of the configuration calls you would for other properties.</p>
<p sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="66" sourceendlinenumber="66">If the name supplied to the <code>Property</code> method matches the name of an existing property (a shadow property or one defined on the entity class), then the code will configure that existing property rather than introducing a new shadow property.</p>
<!-- [!code-csharp[Main](samples/Modeling/FluentAPI/Samples/ShadowProperty.cs?highlight=7,8)] -->
<pre sourcefile="modeling/shadow-properties.md" sourcestartlinenumber="69" sourceendlinenumber="86"><code class="lang-csharp">class MyContext : DbContext
{
    public DbSet&lt;Blog&gt; Blogs { get; set; }

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.Entity&lt;Blog&gt;()
            .Property&lt;DateTime&gt;(&quot;LastUpdated&quot;);
    }
}

public class Blog
{
    public int BlogId { get; set; }
    public string Url { get; set; }
}
</code></pre>
            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/shirhatti/EntityFramework.Docs/blob/export-qa-fixes/ef/modeling/shadow-properties.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright Â© 2015-2016 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
