<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Loading Related Data </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Loading Related Data ">
    <meta name="generator" content="docfx 2.5.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="querying/related-data">
              <h1 id="loading-related-data" sourcefile="querying/related-data.md" sourcestartlinenumber="4" sourceendlinenumber="4">Loading Related Data</h1>
              
<div class="WARNING sourceFile=" querying/related-data.md"="" sourcestartlinenumber="6" sourceendlinenumber="6" "=""><h5>Warning</h5><p sourcefile="querying/related-data.md" sourcestartlinenumber="7" sourceendlinenumber="7">This documentation is for EF Core. For EF6.x and earlier release see <a href="http://msdn.com/data/ef" sourcefile="querying/related-data.md" sourcestartlinenumber="7" sourceendlinenumber="7"><a href="http://msdn.com/data/ef" sourcefile="querying/related-data.md" sourcestartlinenumber="7" sourceendlinenumber="7">http://msdn.com/data/ef</a></a>.</p>
</div>
<p sourcefile="querying/related-data.md" sourcestartlinenumber="9" sourceendlinenumber="9">Entity Framework Core allows you to use the navigation properties in your model to load related entities. There are three common O/RM patterns used to load related data.</p>
<ul sourcefile="querying/related-data.md" sourcestartlinenumber="10" sourceendlinenumber="14">
<li sourcefile="querying/related-data.md" sourcestartlinenumber="10" sourceendlinenumber="10"><p sourcefile="querying/related-data.md" sourcestartlinenumber="10" sourceendlinenumber="10"><strong>Eager loading</strong> means that the related data is loaded from the database as part of the initial query.</p>
</li>
<li sourcefile="querying/related-data.md" sourcestartlinenumber="12" sourceendlinenumber="12"><p sourcefile="querying/related-data.md" sourcestartlinenumber="12" sourceendlinenumber="12"><strong>Explicit loading</strong> means that the related data is explicitly loaded from the database at a later time.</p>
</li>
<li sourcefile="querying/related-data.md" sourcestartlinenumber="14" sourceendlinenumber="14"><p sourcefile="querying/related-data.md" sourcestartlinenumber="14" sourceendlinenumber="14"><strong>Lazy loading</strong> means that the related data is transparently loaded from the database when the navigation property is accessed. Lazy loading is not yet possible with EF Core.</p>
</li>
</ul>
<div class="TIP sourceFile=" querying/related-data.md"="" sourcestartlinenumber="16" sourceendlinenumber="16" "=""><h5>Tip</h5><p sourcefile="querying/related-data.md" sourcestartlinenumber="17" sourceendlinenumber="17">You can view this article&#39;s <a href="https://github.com/aspnet/EntityFramework.Docs/tree/master/samples/Querying" sourcefile="querying/related-data.md" sourcestartlinenumber="17" sourceendlinenumber="17">sample</a> on GitHub.</p>
</div>
<h2 id="eager-loading" sourcefile="querying/related-data.md" sourcestartlinenumber="19" sourceendlinenumber="19">Eager loading</h2>
<p sourcefile="querying/related-data.md" sourcestartlinenumber="21" sourceendlinenumber="21">You can use the <code>Include</code> method to specify related data to be included in query results. In the following example, the blogs that are returned in the results will have their <code>Posts</code> property populated with the related posts.</p>
<!-- [!code-csharp[Main](samples/Querying/Querying/RelatedData/Sample.cs)] -->
<pre sourcefile="querying/related-data.md" sourcestartlinenumber="24" sourceendlinenumber="28"><code class="lang-csharp">var blogs = context.Blogs
    .Include(blog =&gt; blog.Posts)
    .ToList();
</code></pre><div class="TIP sourceFile=" querying/related-data.md"="" sourcestartlinenumber="30" sourceendlinenumber="30" "=""><h5>Tip</h5><p sourcefile="querying/related-data.md" sourcestartlinenumber="31" sourceendlinenumber="31">Entity Framework Core will automatically fix-up navigation properties to any other entities that were previously loaded into the context instance. So even if you don&#39;t explicitly include the data for a navigation property, the property may still be populated if some or all of the related entities were previously loaded.</p>
</div>
<p sourcefile="querying/related-data.md" sourcestartlinenumber="33" sourceendlinenumber="33">You can include related data from multiple relationships in a single query.</p>
<!-- [!code-csharp[Main](samples/Querying/Querying/RelatedData/Sample.cs)] -->
<pre sourcefile="querying/related-data.md" sourcestartlinenumber="36" sourceendlinenumber="41"><code class="lang-csharp">var blogs = context.Blogs
    .Include(blog =&gt; blog.Posts)
    .Include(blog =&gt; blog.Owner)
    .ToList();
</code></pre><h3 id="including-multiple-levels" sourcefile="querying/related-data.md" sourcestartlinenumber="43" sourceendlinenumber="43">Including multiple levels</h3>
<p sourcefile="querying/related-data.md" sourcestartlinenumber="45" sourceendlinenumber="45">You can drill down thru relationships to include multiple levels of related data using the <code>ThenInclude</code> method. The following example loads all blogs, their related posts, and the author of each post.</p>
<!-- [!code-csharp[Main](samples/Querying/Querying/RelatedData/Sample.cs)] -->
<pre sourcefile="querying/related-data.md" sourcestartlinenumber="48" sourceendlinenumber="53"><code class="lang-csharp">var blogs = context.Blogs
    .Include(blog =&gt; blog.Posts)
        .ThenInclude(post =&gt; post.Author)
    .ToList();
</code></pre><p sourcefile="querying/related-data.md" sourcestartlinenumber="55" sourceendlinenumber="55">You can chain multiple calls to <code>ThenInclude</code> to continue including further levels of related data.</p>
<!-- [!code-csharp[Main](samples/Querying/Querying/RelatedData/Sample.cs)] -->
<pre sourcefile="querying/related-data.md" sourcestartlinenumber="58" sourceendlinenumber="64"><code class="lang-csharp">var blogs = context.Blogs
    .Include(blog =&gt; blog.Posts)
        .ThenInclude(post =&gt; post.Author)
        .ThenInclude(author =&gt; author.Photo)
    .ToList();
</code></pre><p sourcefile="querying/related-data.md" sourcestartlinenumber="66" sourceendlinenumber="66">You can combine all of this to include related data from multiple levels and multiple roots in the same query.</p>
<!-- [!code-csharp[Main](samples/Querying/Querying/RelatedData/Sample.cs)] -->
<pre sourcefile="querying/related-data.md" sourcestartlinenumber="69" sourceendlinenumber="77"><code class="lang-csharp">var blogs = context.Blogs
    .Include(blog =&gt; blog.Posts)
        .ThenInclude(post =&gt; post.Author)
        .ThenInclude(author =&gt; author.Photo)
    .Include(blog =&gt; blog.Owner)
        .ThenInclude(owner =&gt; owner.Photo)
    .ToList();
</code></pre><h3 id="ignored-includes" sourcefile="querying/related-data.md" sourcestartlinenumber="79" sourceendlinenumber="79">Ignored includes</h3>
<p sourcefile="querying/related-data.md" sourcestartlinenumber="81" sourceendlinenumber="81">If you change the query so that it no longer returns instances of the entity type that the query began with, then the include operators are ignored.</p>
<p sourcefile="querying/related-data.md" sourcestartlinenumber="83" sourceendlinenumber="83">In the following example, the include operators are based on the <code>Blog</code>, but then the <code>Select</code> operator is used to change the query to return an anonymous type. In this case, the include operators have no effect.</p>
<!-- [!code-csharp[Main](samples/Querying/Querying/RelatedData/Sample.cs)] -->
<pre sourcefile="querying/related-data.md" sourcestartlinenumber="86" sourceendlinenumber="95"><code class="lang-csharp">var blogs = context.Blogs
    .Include(blog =&gt; blog.Posts)
    .Select(blog =&gt; new
    {
        Id = blog.BlogId,
        Url = blog.Url
    })
    .ToList();
</code></pre><p sourcefile="querying/related-data.md" sourcestartlinenumber="97" sourceendlinenumber="97">By default, EF Core will log a warning when include operators are ignored. See <a href="../miscellaneous/logging.html" sourcefile="querying/related-data.md" sourcestartlinenumber="97" sourceendlinenumber="97">Logging</a> for more information on viewing logging output. You can change the behavior when an include operator is ignored to either throw or do nothing. This is done when setting up the options for your context - typically in <code>DbContext.OnConfiguring</code>, or in <code>Startup.cs</code> if you are using ASP.NET Core.</p>
<!-- [!code-csharp[Main](samples/Querying/Querying/RelatedData/ThrowOnIgnoredInclude/BloggingContext.cs?highlight=5)] -->
<pre sourcefile="querying/related-data.md" sourcestartlinenumber="100" sourceendlinenumber="107"><code class="lang-csharp">protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
{
    optionsBuilder
        .UseSqlServer(@&quot;Server=(localdb)\mssqllocaldb;Database=EFQuerying;Trusted_Connection=True;&quot;)
        .ConfigureWarnings(warnings =&gt; warnings.Throw(CoreEventId.IncludeIgnoredWarning));
}
</code></pre><h2 id="explicit-loading" sourcefile="querying/related-data.md" sourcestartlinenumber="109" sourceendlinenumber="109">Explicit loading</h2>
<p sourcefile="querying/related-data.md" sourcestartlinenumber="111" sourceendlinenumber="111">Explicit loading does not yet have a first class API in EF Core. You can view the <a href="https://github.com/aspnet/EntityFramework/issues/625" sourcefile="querying/related-data.md" sourcestartlinenumber="111" sourceendlinenumber="111">explicit loading item on our backlog</a> to track this feature.</p>
<p sourcefile="querying/related-data.md" sourcestartlinenumber="113" sourceendlinenumber="113">However, you can use a LINQ query to load the data related to an existing entity instance, by filtering to entities related to the entity in question. Because EF Core will automatically fix-up navigation properties to any other entities that were previously loaded into the context instance, the loaded data will be populated into the desired navigation property.</p>
<p sourcefile="querying/related-data.md" sourcestartlinenumber="115" sourceendlinenumber="115">In the following example, a query is used to load a blog, and then a later query is used to load the posts related to the blog. The loaded posts will be present in the <code>Posts</code> property of the previously loaded blog.</p>
<!-- [!code-csharp[Main](samples/Querying/Querying/RelatedData/Sample.cs)] -->
<pre sourcefile="querying/related-data.md" sourcestartlinenumber="118" sourceendlinenumber="125"><code class="lang-csharp">var blog = context.Blogs
    .Single(b =&gt; b.BlogId == 1);

context.Posts
    .Where(p =&gt; p.BlogId == blog.BlogId)
    .Load();
</code></pre><h2 id="lazy-loading" sourcefile="querying/related-data.md" sourcestartlinenumber="127" sourceendlinenumber="127">Lazy loading</h2>
<p sourcefile="querying/related-data.md" sourcestartlinenumber="129" sourceendlinenumber="129">Lazy loading is not yet supported by EF Core. You can view the <a href="https://github.com/aspnet/EntityFramework/issues/3797" sourcefile="querying/related-data.md" sourcestartlinenumber="129" sourceendlinenumber="129">lazy loading item on our backlog</a> to track this feature.</p>

            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/shirhatti/EntityFramework.Docs/blob/export-qa-fixes/ef/querying/related-data.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2015-2016 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
