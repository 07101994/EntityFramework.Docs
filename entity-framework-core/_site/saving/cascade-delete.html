<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Cascade Delete </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Cascade Delete ">
    <meta name="generator" content="docfx 2.5.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="saving/cascade-delete">
              <h1 id="cascade-delete" sourcefile="saving/cascade-delete.md" sourcestartlinenumber="4" sourceendlinenumber="4">Cascade Delete</h1>
              
<div class="WARNING sourceFile=" saving/cascade-delete.md"="" sourcestartlinenumber="6" sourceendlinenumber="6" "=""><h5>Warning</h5><p sourcefile="saving/cascade-delete.md" sourcestartlinenumber="7" sourceendlinenumber="7">This documentation is for EF Core. For EF6.x and earlier release see <a href="http://msdn.com/data/ef" sourcefile="saving/cascade-delete.md" sourcestartlinenumber="7" sourceendlinenumber="7"><a href="http://msdn.com/data/ef" sourcefile="saving/cascade-delete.md" sourcestartlinenumber="7" sourceendlinenumber="7">http://msdn.com/data/ef</a></a>.</p>
</div>
<p sourcefile="saving/cascade-delete.md" sourcestartlinenumber="9" sourceendlinenumber="9">Cascade delete allows deletion of a principal/parent entity to have a side effect on dependent/child entities it is related to.</p>
<p sourcefile="saving/cascade-delete.md" sourcestartlinenumber="11" sourceendlinenumber="11"><strong>There are three cascade delete behaviors:</strong></p>
<ul sourcefile="saving/cascade-delete.md" sourcestartlinenumber="13" sourceendlinenumber="17">
<li sourcefile="saving/cascade-delete.md" sourcestartlinenumber="13" sourceendlinenumber="13"><p sourcefile="saving/cascade-delete.md" sourcestartlinenumber="13" sourceendlinenumber="13"><strong>Cascade:</strong> Dependent entities are also deleted.</p>
</li>
<li sourcefile="saving/cascade-delete.md" sourcestartlinenumber="15" sourceendlinenumber="15"><p sourcefile="saving/cascade-delete.md" sourcestartlinenumber="15" sourceendlinenumber="15"><strong>SetNull:</strong> The foreign key properties in dependent entities are set to null.</p>
</li>
<li sourcefile="saving/cascade-delete.md" sourcestartlinenumber="17" sourceendlinenumber="17"><p sourcefile="saving/cascade-delete.md" sourcestartlinenumber="17" sourceendlinenumber="17"><strong>Restrict:</strong> The delete operation is not applied to dependent entities. The dependent entities remain unchanged.</p>
</li>
</ul>
<p sourcefile="saving/cascade-delete.md" sourcestartlinenumber="19" sourceendlinenumber="19">See <a href="../modeling/relationships.html" sourcefile="saving/cascade-delete.md" sourcestartlinenumber="19" sourceendlinenumber="19">Relationships</a> for more information about conventions and configuration for cascade delete.</p>
<div class="TIP sourceFile=" saving/cascade-delete.md"="" sourcestartlinenumber="21" sourceendlinenumber="21" "=""><h5>Tip</h5><p sourcefile="saving/cascade-delete.md" sourcestartlinenumber="22" sourceendlinenumber="22">You can view this article&#39;s <a href="https://github.com/aspnet/EntityFramework.Docs/tree/master/samples/Saving/Saving/CascadeDelete/" sourcefile="saving/cascade-delete.md" sourcestartlinenumber="22" sourceendlinenumber="22">sample</a> on GitHub.</p>
</div>
<h2 id="cascading-to-tracked-entities" sourcefile="saving/cascade-delete.md" sourcestartlinenumber="24" sourceendlinenumber="24">Cascading to tracked entities</h2>
<p sourcefile="saving/cascade-delete.md" sourcestartlinenumber="26" sourceendlinenumber="26">When you call <em>SaveChanges</em>, the cascade delete rules will be applied to any entities that are being tracked by the context.</p>
<p sourcefile="saving/cascade-delete.md" sourcestartlinenumber="28" sourceendlinenumber="28">Consider a simple <em>Blog</em> and <em>Post</em> model where the relationship between the two entities is required. By convention. the cascade behavior for this relationship is set to <em>Cascade</em>.</p>
<p sourcefile="saving/cascade-delete.md" sourcestartlinenumber="30" sourceendlinenumber="30">The following code loads a Blog and all its related Posts from the database (using the <em>Include</em> method). The code then deletes the Blog.</p>
<!-- [!code-csharp[Main](samples/Saving/Saving/CascadeDelete/Sample.cs)] -->
<pre sourcefile="saving/cascade-delete.md" sourcestartlinenumber="33" sourceendlinenumber="40"><code class="lang-csharp">        using (var db = new BloggingContext())
        {
            var blog = db.Blogs.Include(b =&gt; b.Posts).First();
            db.Remove(blog);
            db.SaveChanges();
        }
</code></pre><p sourcefile="saving/cascade-delete.md" sourcestartlinenumber="42" sourceendlinenumber="42">Because all the Posts are tracked by the context, the cascade behavior is applied to them before saving to the database. EF therefore issues a  <em>DELETE</em> statement for each entity.</p>
<!-- literal_block"xml:space": "preserve", "classes  "backrefs  "names  "dupnames   -->
<pre sourcefile="saving/cascade-delete.md" sourcestartlinenumber="45" sourceendlinenumber="52"><code>   DELETE FROM [Post]
   WHERE [PostId] = @p0;
   DELETE FROM [Post]
   WHERE [PostId] = @p1;
   DELETE FROM [Blog]
   WHERE [BlogId] = @p2;
</code></pre><h2 id="cascading-to-untracked-entities" sourcefile="saving/cascade-delete.md" sourcestartlinenumber="54" sourceendlinenumber="54">Cascading to untracked entities</h2>
<p sourcefile="saving/cascade-delete.md" sourcestartlinenumber="56" sourceendlinenumber="56">The following code is almost the same as our previous example, except it does not load the related Posts from the database.</p>
<!-- [!code-csharp[Main](samples/Saving/Saving/CascadeDelete/Sample.cs)] -->
<pre sourcefile="saving/cascade-delete.md" sourcestartlinenumber="59" sourceendlinenumber="66"><code class="lang-csharp">        using (var db = new BloggingContext())
        {
            var blog = db.Blogs.First();
            db.Remove(blog);
            db.SaveChanges();
        }
</code></pre><p sourcefile="saving/cascade-delete.md" sourcestartlinenumber="68" sourceendlinenumber="68">Because the Posts are not tracked by the context, a <em>DELETE</em> statement is only issued for the <em>Blog</em>. This relies on a corresponding cascade behavior being present in the database to ensure data that is not tracked by the context is also deleted. If you use EF to create the database, this cascade behavior will be setup for you.</p>
<!-- literal_block"xml:space": "preserve", "classes  "backrefs  "names  "dupnames   -->
<pre sourcefile="saving/cascade-delete.md" sourcestartlinenumber="71" sourceendlinenumber="74"><code>   DELETE FROM [Blog]
   WHERE [BlogId] = @p0;
</code></pre>
            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/shirhatti/EntityFramework.Docs/blob/export-qa-fixes/ef/saving/cascade-delete.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright Â© 2015-2016 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
